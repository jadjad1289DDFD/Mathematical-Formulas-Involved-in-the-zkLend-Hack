# Formal Proof : Exploit Viability Under Dynamic Accumulator Conditions

##  Introduction
This proof demonstrates that the **interaction between floor division and accumulator inflation** creates an exploit **only if the accumulator increases after minting**. Static accumulator conditions result in attacker loss, but dynamic growth enables profit extraction.

---



### Critical  Condition
- **Accumulator inflation must occur after minting** but before withdrawal.  
  - Attacker deposits when `A = A1`, mints tokens.  
  - `A` inflates to `A2 >> A1` (via flashloan).  
  - Withdrawal uses inflated `A2`, amplifying floor division rounding.

---

## Step-by-Step Exploit Under Dynamic Accumulator

### 1. Minting Phase (Low A)
- Let `A1 = k1 * T + δ1`, where `0 < δ1 < T`.
- Attacker deposits `d = (A1 / T) + ε = k1 + (δ1 / T) + ε`.
- Mints 1 zToken:  
  ```text
  z = floor(d * T / A1) = floor(1 + (ε * T / A1)) = 1
  ```

### 2. Accumulator Inflation
- `A` increases to `A2 = k2 * T + δ2` (e.g., via flashloan), where `k2 >> k1`.

### 3. Withdrawal Phase (High A)
- Burning 1 zToken yields:  
  ```text
  w = floor(A2 / T) = k2
  ```
- **Net Profit**:  
  ```text
  Profit = w - d = k2 - (k1 + (δ1 / T) + ε)
  ```
- For `k2 >> k1`, profit scales linearly: `Profit ≈ k2`.

---




## Key Conditions for Valid Exploit
1. **Dynamic Accumulator**: `A` must increase post-minting (via flashloan).  
2. **Floor Division**: Rounding errors down during minting and up during withdrawal.  
3. **Timing**: Withdrawal occurs after `A` has inflated sufficiently.

---

## Conclusion
 The  exploit requires:  
1. **Accumulator growth** between minting and withdrawal.  
2. **Asymmetric rounding**: Floor during minting (reducing token minted) and floor during withdrawal (amplifying collateral loss for the protocol).  
